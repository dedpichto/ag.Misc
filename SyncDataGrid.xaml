<!-- MainWindow.xaml -->
<Window x:Class="DataGridSyncApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DataGridSyncApp"
        Title="Synchronized DataGrids" Height="600" Width="800">
    
    <Window.DataContext>
        <local:MainViewModel />
    </Window.DataContext>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="20" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        
        <!-- Approach 1: Using Attached Behavior -->
        <GroupBox Grid.Row="0" Header="Approach 1: Attached Behavior" Margin="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="10" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                
                <!-- First DataGrid -->
                <DataGrid x:Name="DataGrid1" 
                          Grid.Row="0"
                          ItemsSource="{Binding DataGrid1Items}"
                          local:DataGridSyncBehavior.SyncGroup="Group1"
                          AutoGenerateColumns="False"
                          HeadersVisibility="Column"
                          GridLinesVisibility="All">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Column 1" 
                                          Binding="{Binding Column1}" 
                                          Width="100" />
                        <DataGridTextColumn Header="Column 2" 
                                          Binding="{Binding Column2}" 
                                          Width="150" />
                        <DataGridTextColumn Header="Column 3" 
                                          Binding="{Binding Column3}" 
                                          Width="200" />
                    </DataGrid.Columns>
                </DataGrid>
                
                <GridSplitter Grid.Row="1" HorizontalAlignment="Stretch" 
                            Background="Gray" Height="2" />
                
                <!-- Second DataGrid (synchronized with first) -->
                <DataGrid x:Name="DataGrid2" 
                          Grid.Row="2"
                          ItemsSource="{Binding DataGrid2Items}"
                          local:DataGridSyncBehavior.SyncGroup="Group1"
                          AutoGenerateColumns="False"
                          HeadersVisibility="Column"
                          GridLinesVisibility="All">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Column A" 
                                          Binding="{Binding Column1}" 
                                          Width="100" />
                        <DataGridTextColumn Header="Column B" 
                                          Binding="{Binding Column2}" 
                                          Width="150" />
                        <DataGridTextColumn Header="Column C" 
                                          Binding="{Binding Column3}" 
                                          Width="200" />
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </GroupBox>
        
        <GridSplitter Grid.Row="1" HorizontalAlignment="Stretch" 
                     Background="DarkGray" Height="4" />
        
        <!-- Approach 2: Using ViewModel Binding -->
        <GroupBox Grid.Row="2" Header="Approach 2: ViewModel Binding" Margin="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="10" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                
                <!-- First DataGrid with bound column widths -->
                <DataGrid x:Name="DataGrid3" 
                          Grid.Row="0"
                          ItemsSource="{Binding DataGrid1Items}"
                          AutoGenerateColumns="False"
                          HeadersVisibility="Column"
                          GridLinesVisibility="All">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Column 1" 
                                          Binding="{Binding Column1}" 
                                          Width="{Binding DataContext.ColumnWidths[0].Width, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay}" />
                        <DataGridTextColumn Header="Column 2" 
                                          Binding="{Binding Column2}" 
                                          Width="{Binding DataContext.ColumnWidths[1].Width, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay}" />
                        <DataGridTextColumn Header="Column 3" 
                                          Binding="{Binding Column3}" 
                                          Width="{Binding DataContext.ColumnWidths[2].Width, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay}" />
                    </DataGrid.Columns>
                </DataGrid>
                
                <GridSplitter Grid.Row="1" HorizontalAlignment="Stretch" 
                            Background="Gray" Height="2" />
                
                <!-- Second DataGrid with same bound column widths -->
                <DataGrid x:Name="DataGrid4" 
                          Grid.Row="2"
                          ItemsSource="{Binding DataGrid2Items}"
                          AutoGenerateColumns="False"
                          HeadersVisibility="Column"
                          GridLinesVisibility="All">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Column A" 
                                          Binding="{Binding Column1}" 
                                          Width="{Binding DataContext.ColumnWidths[0].Width, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay}" />
                        <DataGridTextColumn Header="Column B" 
                                          Binding="{Binding Column2}" 
                                          Width="{Binding DataContext.ColumnWidths[1].Width, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay}" />
                        <DataGridTextColumn Header="Column C" 
                                          Binding="{Binding Column3}" 
                                          Width="{Binding DataContext.ColumnWidths[2].Width, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay}" />
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </GroupBox>
    </Grid>
</Window>
